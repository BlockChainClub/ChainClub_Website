<div class="col-md-12">
  <div class="group">
    <%= link_to("New article", new_admin_official_article_path, class: "btn btn-primary pull-right") %>
  </div>
  <%= form_tag bulk_update_admin_official_articles_path, :class => "form-inline" do %>
    <table class="table table-hover">
      <thead>
        <tr>
          <th><%= check_box_tag "全选", "1", false, :id => "toggle_all" %></th>
          <td>#</td>
          <td>Title</td>
          <td>author</td>
          <td>status</td>
          <td>source</td>
          <td>category</td>
        </tr>
      </thead>
      <tbody>
        <% @official_articles.each do |official_article| %>
          <tr>
            <td>
              <%= check_box_tag "ids[]", official_article.id %>
            </td>
            <td>#</td>
            <td><%= link_to(official_article.title, admin_official_article_path(official_article)) %></td>
            <td><%= official_article.author %></td>
            <td><%= t(official_article.status, :scope => "official_article.status") %></td>
            <td><%= official_article.source %></td>
            <td><%=official_article.article_category.try(:name) %></td>
            <td><%= official_article.created_at.to_s %></td>
            <td>
                <%= link_to("Edit", edit_admin_official_article_path(official_article), class: "btn btn-sm btn-default")%>
                <%= link_to("Delete", admin_official_article_path(official_article),    class: "btn btn-sm btn-default", 
                            method: :delete, data: { confirm: "Are you sure?" } )%>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <p><%= submit_tag "批次删除", :class => "btn btn-danger", :data => { :confirm => "Are you sure?" } %></p>
  <% end %>
</div>

<script>
  // 这个 javascript 会绑事件在 #toggle_all 核选方块上，来做全选效果
  $("#toggle_all").click(function(){
    if ( $(this).prop("checked") ) {
      $("input[name='ids[]']").prop("checked", true);
    } else {
      $("input[name='ids[]']").prop("checked", false);
    }
  })
</script>